# 1. 状态保持

* 服务器是无状态的
* 客户端通过socket连接服务器, 断开后自动销毁socket, 下次连接无法知道是谁连接的.
* 所以需要一个媒介来储存回话记录

# 2. cookie

## 2.1 特点

1. 服务器生成, 并发送给client, 保存于client
2. client访问时, 会将本网站的cookie全部发送过来.
3. 数据储存不安全, 容易被钓鱼, 或者被用户恶意修改等

## 2.2 cookie

### 2.2.1 配置cookie

```python
def set_cookie(
    """配置cookie"""
        self,
        key,
        value="",
        max_age=None,
        expires=None,
        path="/",
        domain=None,
        secure=False,
        httponly=False,
        samesite=None,
)
```

* key: cookie的key
* value: cookie的value
* max_age: 存活时间(秒), None表示回话结束
* expires: 过期时间(datetime或者时间戳), 注意此时间需要+8小时
* path: 限制cookie的作用路径, 默认整个web
* domain: 限制域名
* secure: 是否为HTTPS协议
* httponly: 不允许JS访问Cookie
* samesite: cookie作用范围在同一地点

### 2.2.2 删除cookie

事实上也是设置cookie, 源码如下

```python
def delete_cookie(self, key, path="/", domain=None):
    self.set_cookie(key, expires=0, max_age=0, path=path, domain=domain)
```

# 3. session

## 3.1 特点

* 用户重要数据保存在服务端, 发送给client一个令牌(session_id).
* client再次访问时, 携带令牌查找对应的数据
* 比较安全, 保证重要的数据不会被篡改等.
* 但是需要占用服务器内存

## 3.2 session

### 3.2.1 设置session

```python

```

