# 1. 线程创建

## 2.1 `start_new`

`_thread.start_new`为Python线程创建的最底层接口.

```python
def start_new(function, args, kwargs):
return int
```

* 

**示例**

```python
import time
import _thread
from datetime import datetime

loops = [4, 2, 3, 5]


def loop(index, sleep, lock):
    print("Index {}, sleep {}, datetime {}".format(index, sleep, datetime.now()))
    time.sleep(sleep)
    lock.release() # 释放锁
    print("Index {}, datetime {}".format(index, datetime.now()))


def main():
    print("Thread start: {}".format(datetime.now()))
    locks = []

    for i, v in enumerate(loops):
        lock = _thread.allocate_lock() # 分配锁对象
        lock.acquire() # 获取锁对象
        _thread.start_new(loop, (i, v, lock))
        locks.append(lock)
    # 等待所有锁被释放
    for lock in locks:
        while lock.locked():
            pass
    print("Thread end: {}".format(datetime.now()))

if __name__ == '__main__':
    main()
```

输出

```python
Thread start: 2020-10-22 22:35:47.364775
Index 2, sleep 3, datetime 2020-10-22 22:35:47.371824
Index 1, sleep 2, datetime 2020-10-22 22:35:47.383755
Index 0, sleep 4, datetime 2020-10-22 22:35:47.389487Index 3, sleep 5, datetime 2020-10-22 22:35:47.389487

Index 1, datetime 2020-10-22 22:35:49.395882
Index 2, datetime 2020-10-22 22:35:50.378690
Index 0, datetime 2020-10-22 22:35:51.407472
Index 3, datetime 2020-10-22 22:35:52.401757
Thread end: 2020-10-22 22:35:52.401757
```

## 2.2  `Thread`

