# 外键

保证源表中和引用表中的数据一一对应

注意:

* 主流设计中, 外键用到越来越少. 主要原因是会极大降低表的更新效率
* 解决方式: 可在数据录入时验证(UI层, 表示层), 或者在业务层面(后台代码)去验证, 不要在数据库层面去验证.

# 视图

视图是通过`select`查询出来的结果集, 是一张虚表.

特点: 对多张基本表的引用, 查询语句的执行结果, 不存储数据(基本表数据会发生变化, 视图表结果也会跟着变化)

优点:

* 简化查询
* 逻辑上的独立性, 屏蔽了真是表结构带来的影响
* 视图能够对机密数据提供安全保护

缺点:

* 性能差, 费时间
* 额外增加数据库的复杂度

# 事务

transactions, 事务是一个操作序列

特点

* 一个最小的工作单位, 一个事务对应一个完整的业务逻辑
* 一个完整的业务有批量的DML(delete, insert, update)
* 事务之和DML语句有关

**注意**:

* `InnoDB`引擎支持事务, `MyISAM`不支持事务
* 终端默认开启了`begin`, `commit`的, 不需要手动开启
* Python中默认开启`begin`, 但是没有开启`commit`, 需要手动进行`commit`

事务具有以下特性(ACID):

* Atomic, 原子性: 执行序列语句是最小的单位, 不能再次分割
* Comsistency, 一致性: 执行序列语句时, 要么同时成功, 要么全都失败
* Isolation, 隔离性: 通常来说, 一个事务在提交之前的修改操作, 是对其他事务不可见的.
* Durability, 持久性: 事务一旦提交, 则会永久保存到数据库中.

事务执行:

```mysql
begin;/start transaction;  # 开启事务
commit;  # 提交事务
rollback;  # 某个语句执行失败, 进行回滚操作
```

注意:

* 事务执行时间, 会对表进行行级锁锁定该数据, 其他用户只能读取, 不能修改
* 事务提交后, 其他用户可正常操作
* 等待事务提交时, 可能会超时退出



